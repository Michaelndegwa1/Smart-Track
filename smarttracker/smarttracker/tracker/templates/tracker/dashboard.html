{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Social Media Tracker</title>

  <!-- Tailwind CSS & Chart.js -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Optional local stylesheet -->
  <link rel="stylesheet" href="{% static 'tracker/css/style.css' %}">

  <style>
    body { background: #065f46; }
    .card { background: white; border-radius: 1rem; box-shadow: 0 8px 20px rgba(0,0,0,.1); padding: 1.2rem; }
  </style>
</head>
<body class="text-white">
  <div class="max-w-6xl mx-auto p-6 space-y-6">
    <header class="flex items-center justify-between">
      <h1 class="text-2xl font-extrabold">ðŸ“Š Social Media Tracker</h1>
      <div class="bg-black/40 px-3 py-1 rounded-lg text-sm">Timezone: Local</div>
    </header>

    <!-- KPIs -->
    <section class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="card"><div class="text-slate-600">Facebook (s)</div><div id="kpi_fb" class="text-3xl font-semibold text-black">0</div></div>
      <div class="card"><div class="text-slate-600">Instagram (s)</div><div id="kpi_ig" class="text-3xl font-semibold text-black">0</div></div>
      <div class="card"><div class="text-slate-600">X (s)</div><div id="kpi_x" class="text-3xl font-semibold text-black">0</div></div>
      <div class="card"><div class="text-slate-600">TikTok (s)</div><div id="kpi_tt" class="text-3xl font-semibold text-black">0</div></div>
    </section>

    <!-- Avg Hours/Day Donuts -->
    <section class="card">
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-lg font-semibold text-green-800">Average Hours per Day</h2>
        <div class="text-slate-600 text-sm">Target: 4.0 h/day</div>
      </div>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <div class="flex flex-col items-center"><canvas id="d_fb" width="160" height="160"></canvas><div class="mt-2 text-black">Facebook</div></div>
        <div class="flex flex-col items-center"><canvas id="d_ig" width="160" height="160"></canvas><div class="mt-2 text-black">Instagram</div></div>
        <div class="flex flex-col items-center"><canvas id="d_x" width="160" height="160"></canvas><div class="mt-2 text-black">X</div></div>
        <div class="flex flex-col items-center"><canvas id="d_tt" width="160" height="160"></canvas><div class="mt-2 text-black">TikTok</div></div>
      </div>
    </section>

    <!-- Total Donut -->
    <section class="card">
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-lg font-semibold text-green-800">Total Time (All-Time)</h2>
        <div class="text-slate-600 text-sm">Sum per platform (seconds)</div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="flex flex-col items-center"><canvas id="donutTotal" width="240" height="240"></canvas></div>
        <div id="totalBreakdown" class="text-black text-sm space-y-1"></div>
      </div>
    </section>

    <!-- Last 7 Days Chart -->
    <section class="card">
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-lg font-semibold text-green-800">Last 7 Days</h2>
        <button id="refreshBtn" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-white">Refresh</button>
      </div>
      <canvas id="chart" height="120"></canvas>
    </section>

    <!-- Recent Sessions -->
    <section class="card overflow-x-auto">
      <h2 class="text-lg font-semibold mb-3 text-green-800">Recent Sessions (last 10)</h2>
      <table class="min-w-full text-sm">
        <thead class="text-slate-600">
          <tr>
            <th class="text-left py-1 pr-4">ID</th>
            <th class="text-left py-1 pr-4">Platform</th>
            <th class="text-left py-1 pr-4">Seconds</th>
            <th class="text-left py-1 pr-4">Start</th>
            <th class="text-left py-1 pr-4">End</th>
          </tr>
        </thead>
        <tbody id="tbody" class="text-black"></tbody>
      </table>
    </section>
  </div>

  <!-- Optional local JS -->
  <script src="{% static 'tracker/js/dashboard.js' %}"></script>
</body>
</html>
